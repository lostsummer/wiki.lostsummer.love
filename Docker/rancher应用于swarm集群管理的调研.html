<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/colorful.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Rancher应用于swarm集群管理的调研 - Wiki of Lostsummer</title>
    <meta name="keywords" content="c, python, go, docker, influxdb"/>
    <meta name="description" content="My Personal wiki."/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
  </head>

  <body>
    <div id="container" class="typo">
      
<div id="header">
  <div id="post-nav">
    <a href="/">Wiki of Lostsummer</a>
    &nbsp;&#187;&nbsp;
    <a href="/#Docker">Docker</a>
    &nbsp;&#187;&nbsp;Rancher应用于swarm集群管理的调研
    <span class="updated">Updated&nbsp;
    2018-03-15 17:41
    </span>
  </div>
</div>
<div class="clearfix"></div>
<div id="content">
  <div class="toc"><span class="toctitle">Table of Contents</span><ul>
<li><a href="#rancherswarm">Rancher应用于swarm集群管理的调研</a><ul>
<li><a href="#rancher">Rancher简单概述</a></li>
<li><a href="#_1">适合场景</a></li>
<li><a href="#_2">重要约束</a></li>
<li><a href="#_3">功能覆盖</a><ul>
<li><a href="#_4">部署容器集群</a></li>
<li><a href="#_5">基础架构管理</a></li>
<li><a href="#_6">应用商店</a></li>
</ul>
</li>
<li><a href="#_7">功能缺失</a><ul>
<li><a href="#_8">集群上部署编排容器服务</a></li>
</ul>
</li>
<li><a href="#_9">结论</a></li>
</ul>
</li>
</ul>
</div>
<h1 id="rancherswarm">Rancher应用于swarm集群管理的调研</h1>
<h2 id="rancher">Rancher简单概述</h2>
<p>提供多容器集群环境部署到管理的整套方案，而不仅限于面板监控等个别功能</p>
<h2 id="_1">适合场景</h2>
<p>容器集群快速部署，做多个集群统一管理入口。</p>
<p>一个典型的Rancher高可用环境管理多容器集群</p>
<p><img alt="arch" src="http://140.143.250.15/wiki-img/racher-deploy-architec.png" /></p>
<h2 id="_2">重要约束</h2>
<p>对整个集群的管理要从部署开始控制，对已经手动部署的swarm集群不能直接纳入</p>
<h2 id="_3">功能覆盖</h2>
<ul>
<li>
<h3 id="_4">部署容器集群</h3>
</li>
</ul>
<p>部署swarm集群的简单几步骤</p>
<p><img alt="step" src="http://140.143.250.15/wiki-img/rancher-deploy-swarm-step.png" /></p>
<p>其中第2步中添加的主机是需要安装好支持版本的docker，并且互相开通必备端口访问。</p>
<p>第3、4步全部由脚本自动完成，在每个主机上安装开启了多个基础组件（容器形式），因为国内网络问题，耗时稍长。基础组件中包含了一个portainer，作为集群管理控制面板。</p>
<ul>
<li>
<h3 id="_5">基础架构管理</h3>
</li>
</ul>
<p>包括 主机、容器、存储、密文、证书、镜像库。</p>
<p>除了证书以为其他管理功能和portainer重合。</p>
<ul>
<li>
<h3 id="_6">应用商店</h3>
</li>
</ul>
<p>可以用于基础设施应用的部署（非集群上service）</p>
<h2 id="_7">功能缺失</h2>
<ul>
<li>
<h3 id="_8">集群上部署编排容器服务</h3>
</li>
</ul>
<p>这点portainer可以做到，目前Rancher对swarm的支持还实验阶段，也许以后可以。</p>
<h2 id="_9">结论</h2>
<p>从部署上看，单个swarm集群的手工方式已经足够简单，Rancher的便捷意义不大，批量多套swarm环境，确实会简化一些工作。对K8S可能会减轻更多工作。</p>
<p>从管理多个容器集群的角度看，Rancher提供了统一的管理入口和管理方式，提供各种环境和服务的模板，并且有操作审计的功能，这些都很有意义。但选用Rancher，也意味以后的集群资源的管理以rancher为枢纽，使用rancher化的方式，和原生手工的方法略有差别，比如它有自己的编排脚本rancher-compose.yml。</p>
<p>日后Rancher对swarm集群服务的支持增加，它也许会提供给我们一些有借鉴意义的管理方法，例如如何对外暴露访问性，添加负载均衡等等。</p>
<p>目前线上环境使用rancher的主要约束是必须要铲掉已有swarm集群，用Rancher重新部署。</p>
<p>测试环境 Rancher 访问地址：http://192.168.240.68:8080</p>
  
</div>
    </div>
    <div id="footer">
      <div class="footer-left">
        <p>
        Copyright © 2019 Lostsummer.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
        Theme by <a href="https://git.coding.net/tankywoo/yasimple_x2.git" target="_blank">YASimple_X2</a>.
        </p>
      </div> <!-- end footer-left -->
      <div class="footer-right">
        <p>Site Generated 2019-01-22 16:48:43</p>
      </div> <!-- end footer-right -->
    </div>

    
    
  </body>
</html>